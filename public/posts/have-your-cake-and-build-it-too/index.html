<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Have Your Cake and Build It Too · Discard Changes
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Mike Sigsworth">
<meta name="description" content="In this post I will walk you through the basics of using Cake, a cross-platform build automation system with a C# DSL.
We will create a couple .NET Core projects, then create a Cake file to build, test, and package the app for deployment using Octopus Deploy tools.
Create Project Directory Link to heading Let&rsquo;s start at the beginning and create a new home for our code. I&rsquo;m going to put mine under c:\code, but you do you.">
<meta name="keywords" content="blog,developer,personal,dotnet,kubernetes,terraform,powershell,octopus,github,actions,c#">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Have Your Cake and Build It Too"/>
<meta name="twitter:description" content="In this post I will walk you through the basics of using Cake, a cross-platform build automation system with a C# DSL.
We will create a couple .NET Core projects, then create a Cake file to build, test, and package the app for deployment using Octopus Deploy tools.
Create Project Directory Link to heading Let&rsquo;s start at the beginning and create a new home for our code. I&rsquo;m going to put mine under c:\code, but you do you."/>

<meta property="og:title" content="Have Your Cake and Build It Too" />
<meta property="og:description" content="In this post I will walk you through the basics of using Cake, a cross-platform build automation system with a C# DSL.
We will create a couple .NET Core projects, then create a Cake file to build, test, and package the app for deployment using Octopus Deploy tools.
Create Project Directory Link to heading Let&rsquo;s start at the beginning and create a new home for our code. I&rsquo;m going to put mine under c:\code, but you do you." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://discardchanges.com/posts/have-your-cake-and-build-it-too/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2018-09-26T00:00:00+00:00" />




<link rel="canonical" href="https://discardchanges.com/posts/have-your-cake-and-build-it-too/">


<link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.135e22c97ff685fe983fc60048e309ced8f00d8d38f536aa67dba8a13a03dfa4.css" integrity="sha256-E14iyX/2hf6YP8YASOMJztjwDY049TaqZ9uooToD36Q=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-black-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-black-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Discard Changes
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">About</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/contact/">Contact me</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://discardchanges.com/posts/have-your-cake-and-build-it-too/">
              Have Your Cake and Build It Too
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime="2018-09-26T00:00:00Z">
                September 26, 2018
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              8-minute read
            </span>
          </div>
          
          
          <div class="tags">
  <i class="fa fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/visual-studio-code/">Visual Studio Code</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/cake/">Cake</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/.net-core/">.NET Core</a>
    </span>
      <span class="separator">•</span>
    <span class="tag">
      <a href="/tags/octopus-deploy/">Octopus Deploy</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <p>In this post I will walk you through the basics of using <a href="https://cakebuild.net"  class="external-link" target="_blank" rel="noopener">Cake</a>, a cross-platform build automation system with a C# DSL.</p>
<p>We will create a couple .NET Core projects, then create a Cake file to build, test, and package the app for deployment using Octopus Deploy tools.</p>
<h2 id="create-project-directory">
  Create Project Directory
  <a class="heading-link" href="#create-project-directory">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Let&rsquo;s start at the beginning and create a new home for our code. I&rsquo;m going to put mine under <code>c:\code</code>, but you do you.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> md c:<span class="se">\c</span>ode<span class="se">\H</span>aveYourCakeAndBuildItToo
</span></span></code></pre></div><h2 id="open-vs-code">
  Open VS Code
  <a class="heading-link" href="#open-vs-code">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Now navigate into that directory and open VS Code.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> <span class="nb">cd</span> c:<span class="se">\c</span>ode<span class="se">\H</span>aveYourCakeAndBuildItToo
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> code .
</span></span></code></pre></div><h2 id="install-the-cake-extension">
  Install the Cake Extension
  <a class="heading-link" href="#install-the-cake-extension">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The <a href="https://github.com/cake-build/cake-vscode"  class="external-link" target="_blank" rel="noopener">Cake extension</a> for VS Code is quite simply amazing. It might be the single best reason to use Cake. It makes the experience of writing your build automation script no different than writing any other application code. It provides a set of useful commands which makes the initial setup of Cake dead easy, including a way to enable Intellisense! It also contains a bunch of helpful code snippets, CodeLens-like buttons for running specific tasks from the editor, oh and *gasp* debugging support! Yeah, you can friggin&rsquo; debug your build scripts. I love that!</p>
<p>So without further ado, open the Extensions sidebar (<code>Ctrl+Shift+X</code>) and search for &ldquo;Cake&rdquo;.</p>
<h2 id="setup-your-workspace">
  Setup Your Workspace
  <a class="heading-link" href="#setup-your-workspace">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>To get Cake setup in your project, the extension provides a single command that does just about all you need.</p>
<p>Open the Command Palette (<code>Ctrl+Shift+P</code>) and run the command <code>Cake: Install to workspace</code>.</p>
<p>This will:</p>
<ul>
<li>Install the Cake binaries into the <code>./tools</code> folder</li>
<li>Create two bootstrappers in the root: <code>build.ps1</code> and <code>build.sh</code></li>
<li>Create your Cake build file <code>build.cake</code></li>
</ul>
<p>The one thing that doesn&rsquo;t appear to be included in this command is adding the Intellisense support. But that&rsquo;s simple enough&hellip; Just open the Command Palette again and run <code>Cake: Install Intellisense support</code>. Intellisense support is provided by the <code>Cake.Bakery</code> NuGet package, which you will now find in the <code>./tools</code> folder.</p>
<h3 id="ignore-the-tools-folder">
  Ignore the Tools Folder
  <a class="heading-link" href="#ignore-the-tools-folder">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>We don&rsquo;t want to commit any of the binaries in the <code>./tools</code> folder to our code repository. However, the Cake bootstrapper will need the <code>packages.config</code> in there. If you are using Git, you can add the following to a <code>.gitignore</code> file to omit everything in the <code>./tools</code> folder except the <code>packages.config</code>.</p>
<p>While we&rsquo;re at it, we&rsquo;ll also go ahead and ignore the <code>./build</code> folder which we&rsquo;ll be creating later.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Build Related</span>
</span></span><span class="line"><span class="cl">tools/**
</span></span><span class="line"><span class="cl">!tools/packages.config
</span></span><span class="line"><span class="cl">build/**
</span></span></code></pre></div><h2 id="the-cake-file">
  The Cake File
  <a class="heading-link" href="#the-cake-file">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The <code>build.cake</code> file is where you will define your build steps. The <code>Install to workspace</code> command created this file with a basic starting point including two helpful arguments, setup and teardown methods, and a default task. Let&rsquo;s take a brief look at each.</p>
<h3 id="arguments">
  Arguments
  <a class="heading-link" href="#arguments">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Arguments are specified on the command line when invoking the build script. The template starts you off with the two most commonly used arguments:</p>
<ul>
<li><strong>target</strong> - tells Cake which task to run</li>
<li><strong>configuration</strong> - passed to your build tasks to identify which build configuration to use, e.g. Debug or Release</li>
</ul>
<p><strong>Usage:</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> .<span class="se">\b</span>uild.ps1 -target Build -configuration Debug
</span></span></code></pre></div><h3 id="setup-and-teardown">
  Setup and Teardown
  <a class="heading-link" href="#setup-and-teardown">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The Setup and Teardown methods will run before and after all tasks, respectively. To be honest, I haven&rsquo;t really found a use for these yet. Feel free to remove them for now.</p>
<h3 id="default-task">
  Default Task
  <a class="heading-link" href="#default-task">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>The default task is just a starting point. You can rename this tasks to something else, give it some actual functionality, or just use it as a pointer to another task using <code>.IsDependentOn(&quot;OtherTask&quot;)</code>, which we will see a bit later.</p>
<h2 id="creating-our-application">
  Creating Our Application
  <a class="heading-link" href="#creating-our-application">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Obviously, we are going to need some kind of application to build. So let&rsquo;s spend a little bit of time setting up our solution structure.</p>
<p>First, let&rsquo;s add a solution file at the root of our project. This will simplify our build step, as we can specify the <code>.sln</code> file instead of listing each of the individual <code>.csproj</code> files to build:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> dotnet new sln
</span></span></code></pre></div><p>Next we&rsquo;ll add a <code>src</code> folder to contain all of our projects and within it we&rsquo;ll create a Web API project called <code>HaveYourApi</code>. Finally, we&rsquo;ll add the API project to our <code>.sln</code> file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> md .<span class="se">\s</span>rc
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> dotnet new webapi -n HaveYourApi -o .<span class="se">\s</span>rc<span class="se">\H</span>aveYourApi
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> dotnet sln add .<span class="se">\s</span>rc<span class="se">\H</span>aveYourApi
</span></span></code></pre></div><h2 id="create-the-build-task">
  Create the Build Task
  <a class="heading-link" href="#create-the-build-task">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Now that we have a solution to build, let&rsquo;s add our first Cake task, the <strong>Build</strong> step.</p>
<p>Open <code>build.cake</code> and add the following code <em>(I like to add my tasks just before the <code>Default</code> task, but you can put it anywhere you like)</em>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cs" data-lang="cs"><span class="line"><span class="cl"><span class="n">Task</span><span class="p">(</span><span class="s">&#34;Build&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Does</span><span class="p">(()</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">DotNetCoreBuild</span><span class="p">(</span><span class="s">&#34;HaveYourCakeAndBuildItToo.sln&#34;</span><span class="p">,</span> <span class="k">new</span> <span class="n">DotNetCoreBuildSettings</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Configuration</span> <span class="p">=</span> <span class="n">configuration</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span></code></pre></div><p>Notice in Visual Studio Code the <code>run task|debug task</code> links above each of our tasks. You can click these to quickly build or debug your build script starting in that task, without typing a thing on the command line. Pretty neat-o!</p>
<p>Go ahead and click <code>run task</code> and watch the build output in the VS Code terminal.</p>
<div class="notice note">
  <div class="notice-title">
    <i class="fa fa-sticky-note" aria-hidden="true"></i>Note
  </div>
  <div class="notice-content">Remember, if you run into any issues please leave a comment and I will try to help as best I can.</div>
</div>

<h2 id="create-a-unittests-task">
  Create a UnitTests Task
  <a class="heading-link" href="#create-a-unittests-task">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>A very common task to have in a build script is one which runs all of your unit tests after the <strong>Build</strong> step. So let&rsquo;s do that!</p>
<p>First, we&rsquo;ll create an xUnit project and then add it to the solution file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-console" data-lang="console"><span class="line"><span class="cl"><span class="gp">&gt;</span> dotnet new xunit -n HaveYourApi.Test -o .<span class="se">\s</span>rc<span class="se">\H</span>aveYourApi.Test
</span></span><span class="line"><span class="cl"><span class="gp">&gt;</span> dotnet sln add .<span class="se">\s</span>rc<span class="se">\H</span>aveYourApi.Test
</span></span></code></pre></div><p>Following the convention of using a <code>.Test</code> suffix for you test projects will make it easy to match all of your test projects using a pattern in your <code>UnitTests</code> task.</p>
<p>Let&rsquo;s create that <code>UnitTests</code> task now. We will do a couple of new things here:</p>
<ul>
<li>First, we&rsquo;ll use the <code>IsDependentOn(&quot;Build&quot;)</code> method to ensure Cake has run the <code>Build</code> task first</li>
<li>Then we&rsquo;ll use <code>DoesForEach()</code> instead of <code>Does()</code>, passing it the list of <code>.csproj</code> files for all the <code>*.Test</code> projects in the solution</li>
<li>Finally, since we&rsquo;re already depending on the <code>Build</code> task, we can tell <code>dotnet</code> not to bother building again</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cs" data-lang="cs"><span class="line"><span class="cl"><span class="n">Task</span><span class="p">(</span><span class="s">&#34;UnitTests&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">IsDependentOn</span><span class="p">(</span><span class="s">&#34;Build&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">DoesForEach</span><span class="p">(</span><span class="n">GetFiles</span><span class="p">(</span><span class="s">&#34;./src/**/*.Test.csproj&#34;</span><span class="p">),</span> <span class="p">(</span><span class="n">project</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">DotNetCoreTest</span><span class="p">(</span><span class="n">project</span><span class="p">.</span><span class="n">FullPath</span><span class="p">,</span> <span class="k">new</span> <span class="n">DotNetCoreTestSettings</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Configuration</span> <span class="p">=</span> <span class="n">configuration</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">NoBuild</span> <span class="p">=</span> <span class="k">true</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span></code></pre></div><h2 id="octopus-deploy">
  Octopus Deploy
  <a class="heading-link" href="#octopus-deploy">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>I use Octopus Deploy at work. And Cake makes it really easy to automate all sorts of things with Octopus. Today we will keep it pretty simple and just create an Octopus-friendly NuGet package that we can use in an Octopus deployment.</p>
<p>In order to create the NuGet package for Octopus we need a tool called <code>OctoPack</code>. But to use this, we need the <code>Octo.exe</code> command line tool. Often people will download this binary and commit it right to their repository. But Cake provides us with a couple of ways to avoid doing that, and instead get the tool at runtime from NuGet.</p>
<h3 id="option-1-using-the-bootstrapper-and-packagesconfig">
  Option 1: Using the Bootstrapper and packages.config
  <a class="heading-link" href="#option-1-using-the-bootstrapper-and-packagesconfig">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>This is the recommended way to install a tool. Simply add a reference to it in the <code>./tools/packages.config</code>.</p>
<p>For OctopusTools this might look like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;package</span> <span class="na">id=</span><span class="s">&#34;OctopusTools&#34;</span> <span class="na">version=</span><span class="s">&#34;4.41&#34;</span> <span class="nt">/&gt;</span>
</span></span></code></pre></div><p>When we run the bootstrapper (i.e. <code>build.ps1</code>) it will install any tools it finds in the <code>./tools/packages.config</code>.</p>
<h3 id="option-2-using-the-tool-directive">
  Option 2: Using the <code>#tool</code> directive
  <a class="heading-link" href="#option-2-using-the-tool-directive">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Cake extends the C# language with a few custom pre-processor directives. In this case, we are interested in the <code>#tool</code> directive which will download a tool from NuGet and install it in the <code>.\tools</code> folder.</p>
<p>For OctopusTools, we&rsquo;d need to add the following line to the top of our <code>build.cake</code> file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cs" data-lang="cs"><span class="line"><span class="cl"><span class="err">#</span><span class="n">tool</span> <span class="n">nuget</span><span class="p">:?</span><span class="n">package</span><span class="p">=</span><span class="n">OctopusTools</span>
</span></span></code></pre></div><p>The VS Code Cake extension makes this even easier as it provides a way of searching NuGet in the Command Pallette for the available tools on NuGet, and even shows the available versions.</p>
<h3 id="install-the-tool">
  Install the Tool
  <a class="heading-link" href="#install-the-tool">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Pick one of the above 2 options to install the <code>OctopusTools</code>. I kind of prefer Option 2 because it makes it explicit in your build file what tools you are depending on. But again, you do you.</p>
<h3 id="create-an-octopack-task">
  Create An OctoPack Task
  <a class="heading-link" href="#create-an-octopack-task">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Now that we have the <code>OctopusTools</code>, and hence <code>Octo.exe</code> at our disposal, let&rsquo;s create the necessary task to create the package.</p>
<p>OctoPack doesn&rsquo;t support ASP.NET Core projects directly yet. But the workaround is simple enough. First you have to publish your MVC project using <code>dotnet publish</code> and then you can run OctoPack on the published files.</p>
<p>We will publish the <code>HaveYourApi</code> project into <code>./build/publish</code> and then pack those files as a NuGet package in the <code>./build/pack</code> folder.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cs" data-lang="cs"><span class="line"><span class="cl"><span class="n">Task</span><span class="p">(</span><span class="s">&#34;OctoPack&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">IsDependentOn</span><span class="p">(</span><span class="s">&#34;UnitTests&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span><span class="n">Does</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">DotNetCorePublish</span><span class="p">(</span><span class="s">&#34;./src/HaveYourApi/HaveYourApi.csproj&#34;</span><span class="p">,</span> <span class="k">new</span> <span class="n">DotNetCorePublishSettings</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">Configuration</span> <span class="p">=</span> <span class="n">configuration</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">NoBuild</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">OutputDirectory</span> <span class="p">=</span> <span class="s">&#34;./build/publish&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">        <span class="n">OctoPack</span><span class="p">(</span><span class="s">&#34;HaveYourApi&#34;</span><span class="p">,</span> <span class="k">new</span> <span class="n">OctoPackSettings</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">BasePath</span> <span class="p">=</span> <span class="s">&#34;./build/publish&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">OutFolder</span> <span class="p">=</span> <span class="s">&#34;./build/pack&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">});</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span></code></pre></div><h2 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>That&rsquo;s it. That&rsquo;s the basics. There&rsquo;s plenty more to do. Make sure you try the debugging feature. And of course, commit all this to your repository to make sure we didn&rsquo;t miss anything in the ignore file.</p>
<p>After that, your next steps would be to publish your NuGet package somewhere Octopus can find it and configure your deployment. But that is well beyond the scope of this article.</p>
<p>I hope you found this helpful, and got at least a little bit excited about how easy it is to work with Cake in Visual Studio Code. If you&rsquo;re coming from an existing tool like psake or FAKE, I think you&rsquo;ll find a lot of compelling reasons to switch to Cake, like great Intellisense support, built-in snippets, and the awesome debugging capability.</p>
<p>Okay, that&rsquo;s all for now. Go have some Cake!</p>

      </div>


      <footer>
        


        <div id="disqus_thread"></div>
<script>
  window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "discardchanges" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
    
    document.addEventListener('themeChanged', function (e) { 
        if (document.readyState == 'complete') {
          DISQUS.reset({ reload: true, config: disqus_config });
        }
    });
</script>
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
    2023
     Mike Sigsworth 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
